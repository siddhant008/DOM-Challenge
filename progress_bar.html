<body>
  <style>
    *,
    *::after,
    *::before {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #0f0e17;
    }

    #button {
      background-color: #ff8906;
      color: #fffffe;
      font-size: 5vh;
      display: flex;
      padding: 1vh 2vh;
      border-radius: 1vh;
      outline: none;
    }

    #progress {
      display: flex;
      flex-direction: column;
      background-color: #474747;
      width: 80vh;
      height: 10vh;
      margin: 4vh;
      border-radius: 1vh;
    }

    .filled {
      display: flex;
      flex-direction: column;
      position: relative;
      background: linear-gradient(90deg, #9b5200 0%, #ff9e30 100%);
      height: 10vh;
      border-radius: 1vh;
      animation: fillani 3s linear;
    }

    @keyframes fillani {
      from {
        width: 0vh;
      }
      to {
        width: 80vh;
      }
    }
  </style>
  <div id="progress">
    <div id="status"></div>
  </div>
  <button id="button">RUN</button>
</body>
<script>
  const element = document.querySelector("#progress");
  element.style.width = "200px";
  element.style.height = "20px";
  element.style.backgroundColor = "grey";

  function ProgressBar(count) {
    let delay = 15;
    const button = document.querySelector("#button");
    button.innerHTML = "RUN " + ++count;

    const element2 = document.querySelector("#status");
    element2.style.width = "0px";
    element2.style.height = "20px";
    element2.style.backgroundColor = "blue";
    console.log(count);

    let width = 0;
    setTimeout(() => {
      const interval = setInterval(() => {
        element2.style.width = width + "%";
        width++;
        if (width > 100) {
          element2.style.width = "0%";
          button.innerHTML = "RUN " + --count;
          clearInterval(interval);
        }
      }, delay);
    }, count - 1 * 2000);
  }

  const button = document.querySelector("#button");

  let count = 0;
  button.addEventListener("click", () => {
    console.log(count);
    // ProgressBar(count);
    let delay = 15;
    const button = document.querySelector("#button");
    button.innerHTML = `RUN ` + ++count;

    const element2 = document.querySelector("#status");
    element2.style.width = "0px";
    element2.style.height = "20px";
    element2.style.backgroundColor = "blue";

    let width = 0;
    let t = setTimeout(() => {
      const interval = setInterval(() => {
        element2.style.width = width + "%";
        width++;
        if (width > 100) {
          element2.style.width = "0%";
          button.innerHTML = "RUN " + --count;
          clearInterval(interval);
        }
      }, delay);
    }, count * 1100 + delay * count * 2);
    console.log(count * 1000 + delay * count);
    // clearTimeout(t)
    // count++
  });

  //   let count = 0;
  //   let isOver = true;
  //   const anim = () => {
  //     isOver = false;
  //     if (count - 1) {
  //       isOver = true;
  //       return;
  //     }
  //     bar.firstChild.classList.add("filled");
  //     setTimeout(() => {
  //       bar.firstChild.classList.remove("filled");
  //       remain.innerHTML = --count != 0 ? "&nbsp;" + count : "";
  //     }, 3000);
  //     setTimeout(() => {
  //       anim();
  //     }, 3100);
  //   };
  //   const handleClick = (e) => {
  //     remain.innerHTML = `&nbsp;${++count}`;
  //     isOver ? anim() : "";
  //   };
  //   btn.addEventListener("click", handleClick);
</script>
